# Настройка прокси для OpenAI

## Установка зависимостей

Сначала установите необходимый пакет:

```bash
cd backend
npm install https-proxy-agent
```

## Настройка в .env файле

Добавьте в файл `backend/.env` следующую строку:

```env
OPENAI_PROXY=http://user287528:ko47z3@45.199.135.77:3843
```

**Формат:**
```
OPENAI_PROXY=http://логин:пароль@адрес:порт
```

## Проверка работы

После настройки прокси:

1. Перезапустите сервер:
```bash
cd backend
npm start
```

2. В логах должно появиться:
```
✅ OpenAI proxy configured: http://user287528:****@45.199.135.77:3843
```

3. Проверьте работу ИИ - отправьте тестовое сообщение через виджет.

## Отключение прокси

Чтобы отключить прокси, просто удалите или закомментируйте строку в `.env`:

```env
# OPENAI_PROXY=http://user287528:ko47z3@45.199.135.77:3843
```

Или установите пустое значение:

```env
OPENAI_PROXY=
```

## Устранение проблем

### Прокси не работает

1. Проверьте правильность данных прокси в `.env`
2. Убедитесь, что пакет `https-proxy-agent` установлен
3. Проверьте доступность прокси-сервера
4. Посмотрите логи сервера на наличие ошибок

### Ошибка подключения

Если видите ошибки подключения:
- Проверьте, что прокси-сервер доступен
- Убедитесь, что логин и пароль правильные
- Проверьте, что порт 3843 открыт

## Безопасность

⚠️ **Важно:** Файл `.env` содержит чувствительные данные (пароли, ключи API). 
- Не коммитьте `.env` в Git
- Используйте `.env.example` для шаблона
- Храните `.env` в безопасном месте на сервере

